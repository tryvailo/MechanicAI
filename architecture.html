<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MechanicAI - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</title>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #e4e4e7;
      min-height: 100vh;
      padding: 2rem;
    }
    
    h1 {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      background: linear-gradient(90deg, #21808D, #38b2ac);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .subtitle {
      text-align: center;
      color: #a1a1aa;
      margin-bottom: 3rem;
    }
    
    .section {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 16px;
      padding: 2rem;
      margin-bottom: 2rem;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    h2 {
      color: #21808D;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    h2::before {
      content: '';
      width: 4px;
      height: 24px;
      background: #21808D;
      border-radius: 2px;
    }
    
    .mermaid {
      background: rgba(255, 255, 255, 0.02);
      border-radius: 12px;
      padding: 1.5rem;
      overflow-x: auto;
    }
    
    .tech-stack {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .tech-card {
      background: rgba(33, 128, 141, 0.1);
      border: 1px solid rgba(33, 128, 141, 0.3);
      border-radius: 12px;
      padding: 1.25rem;
    }
    
    .tech-card h3 {
      color: #21808D;
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.5rem;
    }
    
    .tech-card p {
      color: #e4e4e7;
      font-size: 0.95rem;
    }
    
    .file-tree {
      background: #0d1117;
      border-radius: 12px;
      padding: 1.5rem;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 0.875rem;
      line-height: 1.6;
      overflow-x: auto;
    }
    
    .file-tree .folder {
      color: #58a6ff;
    }
    
    .file-tree .file {
      color: #8b949e;
    }
    
    .file-tree .comment {
      color: #6e7681;
    }
    
    .env-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    
    .env-table th,
    .env-table td {
      padding: 0.75rem 1rem;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .env-table th {
      color: #21808D;
      font-weight: 600;
    }
    
    .env-table code {
      background: rgba(33, 128, 141, 0.2);
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-size: 0.85rem;
    }
    
    @media (max-width: 768px) {
      body {
        padding: 1rem;
      }
      
      h1 {
        font-size: 1.75rem;
      }
      
      .section {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <h1>üöó MechanicAI</h1>
  <p class="subtitle">AI-powered –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</p>

  <!-- –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ -->
  <div class="section">
    <h2>–û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</h2>
    <div class="mermaid">
graph TB
    subgraph Client["Frontend (Next.js App Router)"]
        Page["app/page.tsx"]
        Layout["app/layout.tsx"]
        
        subgraph Screens["–≠–∫—Ä–∞–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"]
            Results["ResultsPage"]
            Camera["CameraScanner"]
            Chat["ChatInterface"]
            History["HistoryScreen"]
            Places["PlacesScreen"]
            Analysis["AnalysisResults"]
        end
        
        subgraph UI["UI Components"]
            TabNav["TabNavigation"]
            Map["NearbyPlacesMap"]
            UILib["ui/ (shadcn)"]
        end
    end
    
    subgraph API["API Routes (Server)"]
        AnalyzeAPI["/api/analyze-photo"]
        ChatAPI["/api/chat"]
        PlacesAPI["/api/nearby-places"]
        TranscribeAPI["/api/transcribe"]
    end
    
    subgraph External["External Services"]
        OpenAI["OpenAI API"]
        Claude["Claude API"]
        GooglePlaces["Google Places API"]
        GoogleMaps["Google Maps JS API"]
    end
    
    Page --> Results
    Results --> Camera
    Results --> Chat
    Results --> History
    Results --> Places
    Results --> Analysis
    Results --> TabNav
    
    Places --> Map
    Map --> GoogleMaps
    
    Camera --> AnalyzeAPI
    Chat --> ChatAPI
    Places --> PlacesAPI
    Camera --> TranscribeAPI
    
    AnalyzeAPI --> OpenAI
    AnalyzeAPI --> Claude
    ChatAPI --> OpenAI
    ChatAPI --> Claude
    PlacesAPI --> GooglePlaces
    TranscribeAPI --> OpenAI
    </div>
  </div>

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
  <div class="section">
    <h2>–ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ —ç–∫—Ä–∞–Ω—ã</h2>
    <div class="mermaid">
flowchart LR
    subgraph Navigation["Tab Navigation"]
        direction TB
        T1["üì∑ Camera"]
        T2["üìä Results"]
        T3["üí¨ Chat"]
        T4["üìú History"]
        T5["üìç Places"]
    end
    
    T1 --> CS["CameraScanner<br/>–§–æ—Ç–æ/–≤–∏–¥–µ–æ —Å—ä—ë–º–∫–∞<br/>–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥<br/>–ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"]
    T2 --> AR["AnalysisResults<br/>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏<br/>–°–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º<br/>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"]
    T3 --> CI["ChatInterface<br/>AI —á–∞—Ç-–±–æ—Ç<br/>Streaming –æ—Ç–≤–µ—Ç—ã<br/>Markdown —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥"]
    T4 --> HS["HistoryScreen<br/>–ò—Å—Ç–æ—Ä–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π<br/>LocalStorage"]
    T5 --> PS["PlacesScreen<br/>Nearby Places Map<br/>–ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å—ã<br/>–ü–∞—Ä–∫–æ–≤–∫–∏"]
    </div>
  </div>

  <!-- –ü–æ—Ç–æ–∫ –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ç–æ -->
  <div class="section">
    <h2>–ü–æ—Ç–æ–∫ –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ç–æ</h2>
    <div class="mermaid">
sequenceDiagram
    participant U as User
    participant CS as CameraScanner
    participant API as /api/analyze-photo
    participant AI as OpenAI/Claude
    participant AR as AnalysisResults
    
    U->>CS: –î–µ–ª–∞–µ—Ç —Ñ–æ—Ç–æ
    CS->>CS: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ base64
    CS->>API: POST {image, prompt}
    API->>API: –í—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (env)
    API->>AI: Vision API –∑–∞–ø—Ä–æ—Å
    AI-->>API: –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    API-->>CS: JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    CS->>CS: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
    CS->>AR: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Results
    AR->>AR: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
    </div>
  </div>

  <!-- –ü–æ—Ç–æ–∫ —á–∞—Ç–∞ -->
  <div class="section">
    <h2>–ü–æ—Ç–æ–∫ —á–∞—Ç–∞</h2>
    <div class="mermaid">
sequenceDiagram
    participant U as User
    participant CI as ChatInterface
    participant API as /api/chat
    participant AI as OpenAI/Claude
    
    U->>CI: –í–≤–æ–¥–∏—Ç –≤–æ–ø—Ä–æ—Å
    CI->>CI: –î–æ–±–∞–≤–ª—è–µ—Ç –≤ messages[]
    CI->>API: POST {messages, context}
    API->>API: –§–æ—Ä–º–∏—Ä—É–µ—Ç system prompt
    API->>AI: Chat Completion (stream)
    
    loop Streaming
        AI-->>API: chunk
        API-->>CI: SSE chunk
        CI->>CI: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
    end
    
    CI->>CI: –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    </div>
  </div>

  <!-- –ü–æ—Ç–æ–∫ Places -->
  <div class="section">
    <h2>–ü–æ—Ç–æ–∫ Places (–∫–∞—Ä—Ç–∞)</h2>
    <div class="mermaid">
sequenceDiagram
    participant U as User
    participant PS as PlacesScreen
    participant Geo as useGeolocation
    participant API as /api/nearby-places
    participant GP as Google Places API
    participant Map as NearbyPlacesMap
    participant GM as Google Maps JS
    
    U->>PS: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–∫–ª–∞–¥–∫—É Places
    PS->>Geo: –ó–∞–ø—Ä–æ—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
    Geo-->>PS: {lat, lng}
    
    PS->>API: POST {lat, lng, radius, types}
    API->>GP: searchNearby()
    GP-->>API: places[]
    API-->>PS: {carRepairs, parkings}
    
    PS->>Map: –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö
    Map->>GM: –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞
    GM-->>Map: API ready
    Map->>Map: –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã
    Map->>Map: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤
    
    U->>Map: –ö–ª–∏–∫ –Ω–∞ –º–∞—Ä–∫–µ—Ä
    Map->>Map: InfoWindow —Å –¥–µ—Ç–∞–ª—è–º–∏
    </div>
  </div>

  <!-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ -->
  <div class="section">
    <h2>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤</h2>
    <div class="file-tree">
<span class="folder">camera-scanning-screen/</span>
‚îú‚îÄ‚îÄ <span class="folder">app/</span>                          <span class="comment"># Next.js App Router</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">api/</span>                      <span class="comment"># API Routes (—Å–µ—Ä–≤–µ—Ä–Ω—ã–µ)</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">analyze-photo/</span>        <span class="comment"># –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ Vision AI</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">chat/</span>                 <span class="comment"># AI —á–∞—Ç</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">nearby-places/</span>        <span class="comment"># Google Places API</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="folder">transcribe/</span>           <span class="comment"># –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">layout.tsx</span>                <span class="comment"># Root layout + metadata</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">page.tsx</span>                  <span class="comment"># –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</span>
‚îÇ
‚îú‚îÄ‚îÄ <span class="folder">components/</span>                   <span class="comment"># React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">ui/</span>                       <span class="comment"># shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">results-page.tsx</span>          <span class="comment"># –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ç–∞–±–∞–º–∏</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">camera-scanner.tsx</span>        <span class="comment"># –ö–∞–º–µ—Ä–∞ + –∞–Ω–∞–ª–∏–∑</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">chat-interface.tsx</span>        <span class="comment"># AI —á–∞—Ç</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">history-screen.tsx</span>        <span class="comment"># –ò—Å—Ç–æ—Ä–∏—è</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">places-screen.tsx</span>         <span class="comment"># Nearby Places</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">nearby-places-map.tsx</span>     <span class="comment"># Google Maps</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">tab-navigation.tsx</span>        <span class="comment"># –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è</span>
‚îÇ
‚îú‚îÄ‚îÄ <span class="folder">lib/</span>                          <span class="comment"># –£—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">config/</span>                   <span class="comment"># –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ API</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">hooks/</span>                    <span class="comment"># React —Ö—É–∫–∏</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="folder">utils/</span>                    <span class="comment"># –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</span>
‚îÇ
‚îî‚îÄ‚îÄ <span class="folder">public/</span>                       <span class="comment"># –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã</span>
    ‚îî‚îÄ‚îÄ <span class="folder">markers/</span>                  <span class="comment"># SVG –º–∞—Ä–∫–µ—Ä—ã –¥–ª—è –∫–∞—Ä—Ç—ã</span>
    </div>
  </div>

  <!-- –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π -->
  <div class="section">
    <h2>–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π</h2>
    <div class="tech-stack">
      <div class="tech-card">
        <h3>Frontend</h3>
        <p>Next.js 16, React 19, TypeScript</p>
      </div>
      <div class="tech-card">
        <h3>UI</h3>
        <p>Tailwind CSS 4, shadcn/ui, Radix UI</p>
      </div>
      <div class="tech-card">
        <h3>Maps</h3>
        <p>Google Maps JS API, Google Places API (New)</p>
      </div>
      <div class="tech-card">
        <h3>AI</h3>
        <p>OpenAI GPT-4o (Vision + Chat), Claude</p>
      </div>
      <div class="tech-card">
        <h3>State</h3>
        <p>React hooks, localStorage</p>
      </div>
      <div class="tech-card">
        <h3>Deploy</h3>
        <p>Vercel</p>
      </div>
    </div>
  </div>

  <!-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è -->
  <div class="section">
    <h2>–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è</h2>
    <table class="env-table">
      <tr>
        <th>–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è</th>
        <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
      </tr>
      <tr>
        <td><code>OPENAI_API_KEY</code></td>
        <td>API –∫–ª—é—á OpenAI</td>
      </tr>
      <tr>
        <td><code>CLAUDE_API_KEY</code></td>
        <td>API –∫–ª—é—á Anthropic Claude</td>
      </tr>
      <tr>
        <td><code>VISION_API_PROVIDER</code></td>
        <td>–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ç–æ (openai | claude)</td>
      </tr>
      <tr>
        <td><code>CHAT_API_PROVIDER</code></td>
        <td>–ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —á–∞—Ç–∞ (openai | claude)</td>
      </tr>
      <tr>
        <td><code>GOOGLE_PLACES_API_KEY</code></td>
        <td>Server-side –∫–ª—é—á Google Places API</td>
      </tr>
      <tr>
        <td><code>NEXT_PUBLIC_GOOGLE_MAPS_API_KEY</code></td>
        <td>Client-side –∫–ª—é—á Google Maps JS API</td>
      </tr>
      <tr>
        <td><code>NEXT_PUBLIC_GOOGLE_MAPS_MAP_ID</code></td>
        <td>ID —Å—Ç–∏–ª—è –∫–∞—Ä—Ç—ã Google Maps</td>
      </tr>
    </table>
  </div>

  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: 'dark',
      themeVariables: {
        primaryColor: '#21808D',
        primaryTextColor: '#fff',
        primaryBorderColor: '#38b2ac',
        lineColor: '#4a5568',
        secondaryColor: '#2d3748',
        tertiaryColor: '#1a202c',
        background: '#1a1a2e',
        mainBkg: '#1e3a5f',
        secondBkg: '#234e52',
        nodeBorder: '#4299e1',
        clusterBkg: 'rgba(33, 128, 141, 0.1)',
        clusterBorder: 'rgba(33, 128, 141, 0.3)',
        titleColor: '#e4e4e7',
        edgeLabelBackground: '#1a1a2e',
        actorBkg: '#21808D',
        actorBorder: '#38b2ac',
        actorTextColor: '#fff',
        signalColor: '#e4e4e7',
        signalTextColor: '#e4e4e7'
      },
      flowchart: {
        curve: 'basis',
        padding: 20
      },
      sequence: {
        actorMargin: 50,
        messageMargin: 40
      }
    });
  </script>
</body>
</html>
