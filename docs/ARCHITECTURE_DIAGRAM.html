<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MechanicAI ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0d1117; 
            color: #e6edf3;
            min-height: 100vh;
            padding: 40px 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { 
            text-align: center; 
            margin-bottom: 10px;
            font-size: 2rem;
        }
        .subtitle {
            text-align: center;
            color: #8b949e;
            margin-bottom: 40px;
        }
        .diagram-section {
            background: #161b22;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid #30363d;
        }
        .diagram-section h2 {
            color: #58a6ff;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }
        .mermaid { 
            display: flex; 
            justify-content: center;
            background: #0d1117;
            padding: 20px;
            border-radius: 8px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #30363d;
        }
        th { 
            color: #58a6ff; 
            font-weight: 600;
        }
        td:first-child { font-weight: 500; }
        .tech { color: #7ee787; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß MechanicAI</h1>
        <p class="subtitle">AI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</p>

        <!-- –ì–ª–∞–≤–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ -->
        <div class="diagram-section">
            <h2>–û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</h2>
            <div class="mermaid">
flowchart TB
    subgraph USER["üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"]
        Photo["üì∑ –§–æ—Ç–æ"]
        Video["üé• Realtime –≤–∏–¥–µ–æ"]
        Voice["üé§ –ì–æ–ª–æ—Å"]
        Location["üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è"]
    end
    
    subgraph APP["üì± Next.js PWA"]
        UI["–ö–∞–º–µ—Ä–∞ / –ß–∞—Ç / –ö–∞—Ä—Ç–∞ / –ò—Å—Ç–æ—Ä–∏—è"]
    end
    
    subgraph BACKEND["‚öôÔ∏è Vercel Serverless API"]
        PhotoAPI["/api/analyze-photo"]
        ChatAPI["/api/chat"]
        TranscribeAPI["/api/transcribe-gemini"]
        PlacesAPI["/api/nearby-places"]
    end
    
    subgraph AI["ü§ñ AI –°–µ—Ä–≤–∏—Å—ã"]
        OpenAI["OpenAI GPT-4o Vision"]
        Gemini["Gemini 2.0 Flash\nRealtime Video + Audio"]
    end
    
    subgraph MAPS["üó∫Ô∏è Google APIs"]
        Places["Places API"]
        Maps["Maps JS API"]
    end
    
    subgraph PARTS["üî© –ó–∞–ø—á–∞—Å—Ç–∏ (TODO)"]
        PartsDB["–ë–∞–∑–∞ –∑–∞–ø—á–∞—Å—Ç–µ–π"]
        AutoDoc["AutoDoc API"]
        Compatibility["–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏"]
    end
    
    Photo --> PhotoAPI --> OpenAI
    Video -.->|WebSocket| Gemini
    Voice --> TranscribeAPI --> Gemini
    ChatAPI --> OpenAI
    Location --> PlacesAPI --> Places
    APP --> Maps
    
    OpenAI -.->|TODO| PartsDB
    PartsDB -.-> AutoDoc
    AutoDoc -.-> Compatibility
            </div>
        </div>

        <!-- User Flow -->
        <div class="diagram-section">
            <h2>–û—Å–Ω–æ–≤–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ñ–ª–æ—É</h2>
            <div class="mermaid">
flowchart LR
    A["üì∑ –§–æ—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã"] --> B["üîç AI –∞–Ω–∞–ª–∏–∑"]
    B --> C["üìã –î–∏–∞–≥–Ω–æ–∑"]
    C --> D["üí¨ –£—Ç–æ—á–Ω–µ–Ω–∏–µ –≤ —á–∞—Ç–µ"]
    C --> E["üìç –ù–∞–π—Ç–∏ —Å–µ—Ä–≤–∏—Å"]
    C -.-> F["üî© –ü–æ–¥–±–æ—Ä –∑–∞–ø—á–∞—Å—Ç–µ–π"]
    F -.-> G["‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏"]
    D --> E
            </div>
        </div>

        <!-- Realtime Video Flow -->
        <div class="diagram-section">
            <h2>Realtime Video –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h2>
            <div class="mermaid">
sequenceDiagram
    participant U as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant App as –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    participant WS as WebSocket
    participant G as Gemini 2.0 Flash

    U->>App: –í–∫–ª—é—á–∞–µ—Ç –∫–∞–º–µ—Ä—É
    App->>WS: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
    
    loop –ö–∞–∂–¥—ã–µ 1-2 —Å–µ–∫—É–Ω–¥—ã
        App->>App: –ó–∞—Ö–≤–∞—Ç –∫–∞–¥—Ä–∞
        App->>WS: –û—Ç–ø—Ä–∞–≤–∫–∞ frame (base64)
        WS->>G: –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        G-->>WS: –ì–æ–ª–æ—Å–æ–≤–æ–π –æ—Ç–≤–µ—Ç
        WS-->>App: Audio stream
        App-->>U: –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
    end
            </div>
        </div>

        <!-- –ë–ª–æ–∫–∏ -->
        <div class="diagram-section">
            <h2>5 –æ—Å–Ω–æ–≤–Ω—ã—Ö –±–ª–æ–∫–æ–≤</h2>
            <table>
                <tr>
                    <th>–ë–ª–æ–∫</th>
                    <th>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è</th>
                    <th>–§—É–Ω–∫—Ü–∏—è</th>
                </tr>
                <tr>
                    <td>Frontend</td>
                    <td class="tech">Next.js 16 + React 19</td>
                    <td>PWA: –∫–∞–º–µ—Ä–∞, —á–∞—Ç, –∫–∞—Ä—Ç–∞, –∏—Å—Ç–æ—Ä–∏—è</td>
                </tr>
                <tr>
                    <td>Photo Analysis</td>
                    <td class="tech">OpenAI GPT-4o Vision</td>
                    <td>–ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ –ø—Ä–æ–±–ª–µ–º –∞–≤—Ç–æ</td>
                </tr>
                <tr>
                    <td>Realtime Video</td>
                    <td class="tech">Gemini 2.0 Flash WebSocket</td>
                    <td>Live –≤–∏–¥–µ–æ-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å –≥–æ–ª–æ—Å–æ–º</td>
                </tr>
                <tr>
                    <td>Voice Input</td>
                    <td class="tech">Gemini + Whisper (fallback)</td>
                    <td>–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π</td>
                </tr>
                <tr>
                    <td>Maps & Places</td>
                    <td class="tech">Google Maps + Places API</td>
                    <td>–ü–æ–∏—Å–∫ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–æ–≤ —Ä—è–¥–æ–º</td>
                </tr>
                <tr style="opacity: 0.6;">
                    <td>üîú Parts Database</td>
                    <td class="tech">AutoDoc API</td>
                    <td>–ü–æ–∏—Å–∫ –∑–∞–ø—á–∞—Å—Ç–µ–π + —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</td>
                </tr>
            </table>
            <p style="color: #8b949e; margin-top: 16px; font-size: 0.9rem;">
                * –ü—É–Ω–∫—Ç–∏—Ä–Ω—ã–µ –ª–∏–Ω–∏–∏ –∏ –∑–∞—Ç–µ–º–Ω—ë–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ ‚Äî –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (TODO)
            </p>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#238636',
                primaryTextColor: '#e6edf3',
                primaryBorderColor: '#30363d',
                lineColor: '#8b949e',
                secondaryColor: '#161b22',
                tertiaryColor: '#0d1117'
            }
        });
    </script>
</body>
</html>
